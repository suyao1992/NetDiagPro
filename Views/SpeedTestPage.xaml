<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="NetDiagPro.Views.SpeedTestPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="Transparent">

    <ScrollViewer Padding="32">
        <StackPanel Spacing="24">
            <!-- Header -->
            <TextBlock Text="带宽测速" Style="{StaticResource TitleTextBlockStyle}" />
            <TextBlock Text="测试网络下载/上传速度和延迟" 
                       Style="{StaticResource BodyTextBlockStyle}" 
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}" />

            <!-- Speed Cards -->
            <Grid ColumnSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Download Speed -->
                <Border Grid.Column="0" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="8" Padding="24">
                    <StackPanel HorizontalAlignment="Center" Spacing="8">
                        <FontIcon Glyph="&#xE896;" Foreground="#3B82F6" FontSize="32" />
                        <TextBlock Text="下载速度" Style="{StaticResource CaptionTextBlockStyle}" 
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}" 
                                   HorizontalAlignment="Center" />
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="4">
                            <TextBlock x:Name="DownloadSpeedText" Text="--" 
                                       Style="{StaticResource TitleLargeTextBlockStyle}" 
                                       Foreground="#3B82F6" />
                            <TextBlock Text="Mbps" VerticalAlignment="Bottom" Margin="0,0,0,8"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Upload Speed -->
                <Border Grid.Column="1" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="8" Padding="24">
                    <StackPanel HorizontalAlignment="Center" Spacing="8">
                        <FontIcon Glyph="&#xE898;" Foreground="#10B981" FontSize="32" />
                        <TextBlock Text="上传速度" Style="{StaticResource CaptionTextBlockStyle}" 
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}" 
                                   HorizontalAlignment="Center" />
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="4">
                            <TextBlock x:Name="UploadSpeedText" Text="--" 
                                       Style="{StaticResource TitleLargeTextBlockStyle}" 
                                       Foreground="#10B981" />
                            <TextBlock Text="Mbps" VerticalAlignment="Bottom" Margin="0,0,0,8"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Ping -->
                <Border Grid.Column="2" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="8" Padding="24">
                    <StackPanel HorizontalAlignment="Center" Spacing="8">
                        <FontIcon Glyph="&#xE916;" Foreground="#F59E0B" FontSize="32" />
                        <TextBlock Text="延迟" Style="{StaticResource CaptionTextBlockStyle}" 
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}" 
                                   HorizontalAlignment="Center" />
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="4">
                            <TextBlock x:Name="PingText" Text="--" 
                                       Style="{StaticResource TitleLargeTextBlockStyle}" 
                                       Foreground="#F59E0B" />
                            <TextBlock Text="ms" VerticalAlignment="Bottom" Margin="0,0,0,8"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Test Button -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="16">
                <Button x:Name="StartTestBtn" Click="StartTest_Click" Style="{StaticResource AccentButtonStyle}"
                        MinWidth="160" MinHeight="48">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon x:Name="TestIcon" Glyph="&#xE768;" FontSize="16" />
                        <TextBlock x:Name="TestButtonText" Text="开始测速" />
                    </StackPanel>
                </Button>
                <ProgressRing x:Name="TestProgress" IsActive="False" Width="32" Height="32" />
            </StackPanel>

            <!-- Status -->
            <TextBlock x:Name="StatusText" Text="点击开始测速" 
                       Style="{StaticResource BodyTextBlockStyle}"
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                       HorizontalAlignment="Center" />

            <!-- Streaming Platforms Section -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    CornerRadius="8" Padding="20" Margin="0,16,0,0">
                <StackPanel Spacing="16">
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <FontIcon Glyph="&#xE8B2;" Foreground="{ThemeResource AccentFillColorDefaultBrush}" FontSize="20" />
                        <TextBlock Text="流媒体平台检测" Style="{StaticResource SubtitleTextBlockStyle}" />
                        <Button x:Name="TestStreamingBtn" Click="TestStreaming_Click" 
                                Content="检测" Margin="16,0,0,0" />
                    </StackPanel>
                    <TextBlock Text="检测主流流媒体平台的连通性和推荐画质" 
                               Style="{StaticResource CaptionTextBlockStyle}"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                    <ItemsControl x:Name="StreamingResults">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Spacing="8" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
